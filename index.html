<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <meta name="referrer" content="same-origin"> -->
  <script src="./dist/vue.js"></script>
  <title>Document</title>
</head>
<body>
   <div id="app"></div>
   <script type="module">
    //       Vue.component('blog-post', {
    //   data:function(){
    //       return {
    //         info: {
    //           name: 'ltf',
    //           age:18
    //         }
    //       }
    //   },
    //   render: function (createElement) {
    //     var header = this.$slots.header
    //     var body   = this.$slots.default
    //     var footer = this.$slots.footer
    //     console.log(this.$slots)
    //     console.log(this.$scopedSlots)
    //     return createElement('div', [
    //       createElement('header', this.$scopedSlots.header && this.$scopedSlots.header({info:this.info})),
    //       createElement('main', this.$scopedSlots.default({info:this.info})),
    //       createElement('footer', this.$scopedSlots.footer && this.$scopedSlots.footer({info:this.info}))
    //     ])
    //   }
    // })
    const Child2 = {
      render(h) {
        return h('div',[h('blog-post',{
      // 在数据对象中传递 `scopedSlots`
      // 格式为 { name: props => VNode | Array<VNode> }
        scopedSlots: {
          default: function (props) {
            return h('h1', props.info.name)
          },
          header: function (props) {
            return h('p', props.info.name)
          },
          footer: function (props) {
            return h('p', props.info.name)
          }
        }
      })])
      }
    }
   //  import Vue from './dist/vue.esm.browser.js'
     Vue.config.performance = true
     const Child = {
       inject: {
          parentName: {from: 'name'}
       },
       props: ['message'],
       template: `<p>message:{{message}}{{typeof parentName}}</p>`,
       mounted(){
        //  setTimeout(()=>{
        //      let div = document.createElement('div')
        //      div.textContent = JSON.stringify(this.parentName)
        //      document.body.append(div)
        //  },2000)
       }
     }
     class Model {
        constructor() {
          this.foo = '123'
          this._bar = 'ltf'
        }
        get bar() {
          return this._bar;
        }
        set bar(newvalue) {
          this._bar = newvalue;
        }
      }
     const test = {
       c: '2222'
     }
     const config = {
      //  data: function() {
      //     return {
      //       message: {name:1},
      //     }
      //  },
      data: function() {
        return {
          message: Object.seal({a:'1'})
        }
      },
       el: '#app',
       mounted(){
        //  Vue.set(this.message,'age',10)
         setTimeout(()=>{
          this.message.a = 20
         },1000)
       // this.$set(this.message,'bar','liangtengfeng1')

        // setTimeout(()=>{
        //    console.log('helo')
        // },0)
        // this.$nextTick(() => { console.log(1) })
    
        // Promise.resolve('test').then((res)=>{
        //   console.log(res,'res')
        // })
        // this.$nextTick(() => { console.log(2) })
        // this.$nextTick(() => { console.log(3) })
        // this.$nextTick().then(res=>{
        //   console.log(res,'--')
        // })
       },
       watch:{
          // 'message': function(newVal){
          //     console.log(newVal,'message发生变')
          // },
          // 'message.age': function(newVal){
          //   console.log(newVal,'age变化了')
          // }
       },
       components: {
        Child,Child2
       },
       provide: function() {
          return {
            name: test
          }
       },
       template: `<div id="test">    
        <blog-post>
          <template v-slot:header="props">
            <h1>About Me{{props}}</h1>
          </template>
          <p>Here's some page content, which will be included in vm.$slots.default, because it's not inside a named slot.</p>
          <template v-slot:footer>
            <p>Copyright 2016 Evan You</p>
          </template>
          <p>If I have some content down here, it will also be included in vm.$slots.default.</p>
        </blog-post>
        </div>
        `
     }
     const config1 = {
       el: '#app',
       render(h) {
           return h('div',{},[function(){
             return 2
           }])
       }
     }
     //new Vue(config)
     //<Child :message="message"/>
    //  Vue.options = {
    //   components: {
    //     KeepAlive
    //     Transition,
    //       TransitionGroup
    //   },
    //   directives:{
    //       model,
    //         show
    //   },
    //   filters: Object.create(null),
    //   _base: Vue
    // }
    const ProfileChild = {
      template: '<p v-focus>456</p>',
      directives:{
         focus: {
            inserted: function (el) {
               console.log('insert')
            }
         }
      },
      created(){
        console.log('ProfileChild create')
      },
      mounted(){
          console.log('ProfileChild mounted')
      },
    }
    const Profile = {
        template: '<ul><ProfileChild/></ul>',
        components: {
          ProfileChild
        },
        created(){
        console.log('Profile create')
        },
        mounted(){
          console.log('Profile mounted')
        }
    }
    // console.log(Profile.options)
    // Profile.mixin({
    //   mounted(){
    //     console.log('ltf')
    //   }
    // })
    // console.log(Profile.options)
    // Vue.mixin({
    //     data: function () {
    //         return {
    //             firstName: 'Walter',
    //             lastName: 'White',
    //             alias: 'Heisenberg'
    //         }
    //     }
    // })
    //  new Profile().$mount('#app')
    Vue.component('async-function',function(resolve,reject){
       setTimeout(function(){
           resolve(ProfileChild)
       },3000)
    })
    // Vue.component('async-function', async ()=>{
    //    return ProfileChild
    // })
    const Child3 = {
      props:{
         name: String
      },
      template: `<div>{{name}}:<input/><slot>默认内容</slot></div>`
    }
    const Child4 = {
      props:{
         name: String
      },
      template: `<div>{{name}}: <input/></div>`
    }
    const Child5 = {
      data: function(){
         return {
           info: {
             age: 20,
             name: 'ltf'
           },
           money:12
         }
      },
      mounted(){
        console.log('child mounted')
      },
      template: `<div><slot name="header" :hello="info" v-bind="{a:2}">{{info.age}}</slot></div>`
    }
    const Child6 = {
      template: `<div class="container">
          <header>
            <slot name="header"></slot>
          </header>
          <main>
            <slot></slot>
          </main>
          <footer>
            <slot name="footer"></slot>
          </footer>
        </div>`
    }
    const Child7 = {
      data: function(){
         return {
           info: {
             age: 20,
             name: 'ltf'
           },
           money:12
         }
      },
      template: `<div><slot name="header" :hello="info">{{info.age}}</slot></div>`
    }
    // new Vue({
    //   el: '#app',
    //   data: function(){
    //      return {
    //          current: 'Child3',
    //          slotName: 'header'
    //      }
    //   },
    //   methods: {
    //      toggle(){
    //         this.current = this.current === 'Child3' ? 'Child4': 'Child3'
    //      }
    //   },
    //   created(){
    //     console.log('main create')
    //   },
    //   mounted(){
    //       console.log('main mounted',this)
    //       setTimeout(()=>{
    //          this.current = 'Child4';
    //       },5000)
    //   },
    //   components: {
    //     Child3,Child4,Child5,Child6,Child7
    //    },
    //   //template: `<div><Child3></Child3></div>`
    //  //template: `<div><button @click="toggle">切换{{current}}</button><keep-alive><component :is="current"></component></keep-alive></div>`
    //  //template: `<div><button @click="toggle">切换</button><Child3 :name="current">123</Child3></div>`
    //   template: `<div><Child5><template v-slot:header="{hello}">{{hello}}{{current}}</template></Child5></div>`
    //   // template: `<Child6>
    //   //     <template v-slot:header><h1>Here might be a page title</h1></template><p>A paragraph for the main content.</p><p>And another one.</p><template v-slot:footer><p>Here's some contact info</p></template>
    //   //   </Child6>`
    //   //template: `<div><Child7><template slot="header">123</template></Child7></div>`
    // })

    // 组件A
const A = {
  name: 'A',
  template: `<div class="a"> 这是 A </div>`,
  created () {
    console.log('A 执行了 created')
  },
  mounted () {
    console.log('A 执行了 mounted')
  },
  activated () {
    console.log('A 执行了 activated',this)
  },
  deactivated () {
    console.log('A 执行了 deactivated',this)
  }
}
// 组件B
const B = {
  name: 'B',
  template: `<div class="b"> 这是 B <img src="http://pic3.iqiyipic.com/image/20220122/5d/35/pv_10006595331_em_601.jpg"/></div>`,
  created () {
    console.log('B 执行了 created')
  },
  mounted () {
    console.log('B 执行了 mounted')
  },
  activated () {
    console.log('B 执行了 activated',this)
  },
  deactivated () {
    console.log('B 执行了 deactivated',this)
  }
}
new Vue({
  components: { A, B },
  el: '#app',
  template: '<div>{{this.msg}}</div>',
  //template: `<div><keep-alive><component :is="com"></component></keep-alive><button @click="change">点击</button></div>`,
  data () {
    return {
      com: 'A',
      msg: [{a:2},{a:3}],
    }
  },
  mounted(){
    console.log("main mounted")
    this.msg = {a:1}
    setTimeout(()=>{
      this.msg.a = 2;
    },2000)
  },
  created(){
    console.log("main created",this.$data)
//    this.$set(this.$data,'hell',12)
  },
  methods: {
    change () {
      this.com = this.com === 'A' ? 'B' : 'A'
    }
  }
})
   </script>
</body>
</html>